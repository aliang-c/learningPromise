<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Promise--处理ajax</title>
</head>

<body>
  <h2> Promise封装ajax</h2>
  <button> 点击发送 Ajax</button>
</body>
<script>
  let btn = document.querySelector('button')
  btn.addEventListener('click', function () {
    const p = new Promise((resolve, reject) => {
      // 1.创建对象
      let xhr = new XMLHttpRequest()
      // 2.初识化
      xhr.open('GET', 'https://api.apiopen.top/getJok')
      // 3.发送
      xhr.send()
      // 4.处理响应结果
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
          // alert(xhr.response)
          resolve(xhr.response)
        } else {
          // console.log(xhr.status)
          reject(xhr.status)
        }
      }
    })
    p.then(res => {
      console.log(res)
    }).catch(err => {
      console.log(err)
    })

  })
</script>

</html>