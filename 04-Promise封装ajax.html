/*
需求 : 封装一个sendAjax函数, 用于发送ajax请求
参数 : url
返回值: promise对象
*/

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Promise--处理ajax</title>
</head>

<body>
  <script>
    let btn = document.querySelector('button')

    const sendAjax = function (url) {
      return new Promise((resolve, reject) => {
        let xhr = new XMLHttpRequest();
        xhr.open('GET', url);
        xhr.send();
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4) {
            if (xhr.status === 200) {
              resolve(xhr.status);
            } else {
              reject('请求失败');
            }
          }
        };
      });
    };


    sendAjax('https://api.apiopen.top/getJok')
      .then((value) => {
        console.log(value, '成功');
      })
      .catch((err) => {
        console.log(err, '失败');
      });
  </script>

</body>


</html>